<!DOCTYPE html>
<html>
<head>
    <title>FuwaFuwa Guild Wars Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
    <script>
        // Handle messages from the iframe
        window.addEventListener('message', function(event) {
            // Verify the origin of the message
            if (event.origin.includes('script.google.com') || 
                event.origin.includes('script.googleusercontent.com')) {
                
                console.log('Received message:', event.data);
                
                // Check if it's a navigation request
                if (event.data && event.data.type === 'navigation') {
                    console.log('Navigation request received:', event.data.url);
                    
                    // Extract the page parameter if present
                    let targetUrl = '/fuwafuwa';
                    const originalUrl = event.data.url;
                    
                    // Check if there's a page parameter
                    if (originalUrl.includes('?page=')) {
                        const pageParam = originalUrl.split('?page=')[1].split('&')[0];
                        targetUrl = '/fuwafuwa?page=' + pageParam;
                    }
                    
                    console.log('Navigating to:', targetUrl);
                    
                    // Navigate to the appropriate page on our domain
                    window.location.href = targetUrl;
                }
            }
        });
    </script>
</head>
<body>
    <iframe src="https://script.google.com/macros/s/AKfycbw6tSqkFT9b3rFPLlf3YCBWbhYk0zqJdpokJqMFP2uX0MSK92vS4XU20FtDQ5PSsgE-/exec?embed=true" frameborder="0" allowfullscreen></iframe>
</body>
</html>
